<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤§å°èªçŸ¥ - å¿«æ¨‚å­¸ç¿’æ¨‚åœ’</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .size-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            margin: 2rem 0;
            min-height: 200px;
        }

        .size-item {
            background: none;
            border: none;
            cursor: pointer;
            transition: transform 0.2s;
            padding: 10px;
            border-radius: 10px;
        }

        .size-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
            transform: scale(1.1);
            /* Hover effect adds to existing scale */
        }

        .item-content {
            display: inline-block;
        }
    </style>
</head>

<body>
    <header>
        <h1>å¤§å°èªçŸ¥</h1>
    </header>
    <main>
        <div th:replace="~{fragments :: nav('/cognitive/menu', 'ä¸Šä¸€é ')}"></div>
        <div class="game-area">
            <div id="question" class="question"></div>
            <div id="options-container" class="size-container">
                <!-- Options go here -->
            </div>
            <div id="feedback" style="font-size: 2rem; margin-top: 20px; min-height: 3rem;"></div>
            <button onclick="initGame()" class="btn" style="margin-top: 20px;">ä¸‹ä¸€é¡Œ</button>
        </div>
    </main>

    <script>
        const emojis = ['ğŸ', 'ğŸš—', 'ğŸ¶', 'âš½', 'ğŸ»', 'â­'];

        function initGame() {
            const feedback = document.getElementById('feedback');
            feedback.textContent = '';
            feedback.style.color = 'inherit';

            // Randomly choose question type: 0 for Big, 1 for Small
            const isFindBig = Math.random() > 0.5;
            const questionText = isFindBig ? 'å“ªä¸€å€‹æ¯”è¼ƒå¤§ï¼Ÿ (Big)' : 'å“ªä¸€å€‹æ¯”è¼ƒå°ï¼Ÿ (Small)';
            document.getElementById('question').textContent = questionText;

            // Pick an emoji
            const emoji = emojis[Math.floor(Math.random() * emojis.length)];

            // Generate sizes (scale factors)
            // We want one clearly big and one clearly small, or 3 sizes.
            // Let's do 2 options for simplicity for toddlers.
            const sizes = [
                { id: 'big', scale: 3.0, isBig: true },
                { id: 'small', scale: 1.5, isBig: false }
            ];

            // Shuffle positions
            sizes.sort(() => Math.random() - 0.5);

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';

            sizes.forEach(size => {
                const btn = document.createElement('button');
                btn.className = 'size-item';
                // We apply font-size directly to scale the emoji
                btn.innerHTML = `<span class="item-content" style="font-size: ${size.scale}rem;">${emoji}</span>`;

                btn.onclick = () => checkAnswer(size.isBig, isFindBig);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(isBigItem, isFindBigQuestion) {
            const feedback = document.getElementById('feedback');
            // If looking for Big and clicked Big -> Correct
            // If looking for Small and clicked Small (not Big) -> Correct
            if (isBigItem === isFindBigQuestion) {
                feedback.textContent = 'ç­”å°äº†ï¼å¥½æ£’ï¼ ğŸ‰';
                feedback.style.color = 'green';
                playGameSound('ç­”å°äº†ï¼å¥½æ£’ï¼');
                setTimeout(initGame, 1500);
            } else {
                feedback.textContent = 'å†è©¦è©¦çœ‹å–”ï¼ ğŸ’ª';
                feedback.style.color = 'red';
                playGameSound('å†è©¦è©¦çœ‹å–”ï¼');
            }
        }

        window.onload = function () {
            playGameSound('æ­¡è¿ä¾†åˆ°å¤§å°èªçŸ¥éŠæˆ²ï¼');
            setTimeout(initGame, 1500);
        };

        function playGameSound(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-TW';
                utterance.rate = 0.9;
                utterance.pitch = 1.2;
                speechSynthesis.speak(utterance);
            }
        }
    </script>
</body>

</html>